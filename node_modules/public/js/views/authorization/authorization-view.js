define([
  'views/base/view',
  'controllers/authorization-controller',
  'text!templates/authorization/authorization.hbs',
  []
], function(View, Controller, template) {
  'use strict';

  var AuthorizationView = View.extend({
    // Automatically render after initialize
    autoRender: true,

    className: 'authorization',

    template: template,

    events: {
     "submit form" : function() {
        config.user = $('#Nick').val();
        config.pwd = $('#Pwd').val();

        if($("#check").is(':checked')===true)  localStorage.user=JSON.stringify(config);

        this.authorization()
      }
    },

    authorization: function () {     
      return $.ajax({url: "http://localhost:100/me", 
        success: function(result) {
          console.log(result);
          config.currentUserId = result._id
          location.hash="#/me/show";
        },
        error: function(xhr,status,error) {
          $("#er").css("display","block");
        }
      });
    }
  });

  return AuthorizationView;
});
