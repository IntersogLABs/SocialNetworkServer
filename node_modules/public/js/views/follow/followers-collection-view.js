define([
  'views/base/collection-view',
  'text!templates/follow/follow-collection-view.hbs',
  './follow-view'
], function(CollectionView, template, FollowView) {
  'use strict';

  var FollowersCollectionView = CollectionView.extend({
    autoRender: true,
    itemView: FollowView,
    template: template,
    listSelector: ".list-group",
    fallbackSelector: ".fallback",
    loadingSelector: ".loading",
    animationDuration: 0,

    events: {
      "click #close":"deleteFollower"
    },

    deleteFollower: function(data) {
      if(!confirm("Are you sure, you want to delete this person from followers "
        +$(data.target).parent().siblings('h4').text()+"?")) return;

      var url="http://localhost:100/user/"+$(data.target).attr("data-id")+"/follower";
      $.ajax({url:url,
        method:"DELETE",
        success: function() {
          $(data.target).parentsUntil("ul").remove();
      }});  
    }

  });

  return FollowersCollectionView;
});
